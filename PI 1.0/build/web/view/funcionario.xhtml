<?xml version="1.0" encoding="UTF-8"?>
<!--
To change this template, choose Tools | Templates
and open the template in the editor.
-->
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:p="http://primefaces.org/ui"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:f="http://xmlns.jcp.org/jsf/core">

    <ui:composition template="template.xhtml">
        <ui:define name="centro">
            <p:panel header="Funcionarios" style="text-align: center; border: 0px"><br/>


                <!-- Dialog e cadastrp de usuario -->

                <div align="right">
                    <p:commandButton id="showDialogButton" type="buton" value="Incluir Novo Funcionario" icon="ui-icon-plus" onclick="dlg.show();"/>
                    <h:form>
                        <p:dialog header="Cadastro novo Funcionario" widgetVar="dlg" resizable="false">

                            <h:panelGrid columns="2" style="margin-bottom: 10px">
                                <h:outputLabel for="Nome" value="Nome:"/>
                                <p:inputText style="width: 250px" id="name" value="#{funcionarioMB.funcionario.nome}"/>


                                <h:outputLabel for="cpf" value="CPF:"/>
                                <p:inputText style="width: 150px" id="cpf" value="#{funcionarioMB.funcionario.cpf}"/>

                                <h:outputLabel for="rg" value="RG:"/>
                                <p:inputText style="width: 150px" id="rg" value="#{funcionarioMB.funcionario.rg}"/>

                                <h:outputLabel for="dataNascimento" value="Data Nascimento:"/>
                                <p:calendar effect="fadeIn" style="width: 120px" id="dataNascimento" value="#{funcionarioMB.funcionario.dataNascimento}"/> 



                                <h:outputLabel for="situacaoCivil" value="Situação Civil:"/>
                                <p:selectOneRadio value="#{funcionarioMB.funcionario.situacaoCivil}">  
                                    <f:selectItem itemLabel="Solteiro" itemValue="Solteiro" />  
                                    <f:selectItem itemLabel="Casado" itemValue="Casado" />                                          
                                </p:selectOneRadio>  


                                <h:outputLabel for="ctps" value="CTPS:"/>
                                <p:inputText style="width: 150px" id="ctps" value="#{funcionarioMB.funcionario.ctps}"/>

                                <h:outputLabel for="cidade" value="Cidade:"/>
                                <p:inputText style="width: 160px" id="cidade" value="#{funcionarioMB.funcionario.cidade}"/>

                                <h:outputLabel for="bairo" value="Bairo:"/>
                                <p:inputText style="width: 150px" id="bairo" value="#{funcionarioMB.funcionario.bairro}"/>

                                <h:outputLabel for="rua" value="Rua:"/>
                                <p:inputText style="width:180px" id="rua" value="#{funcionarioMB.funcionario.rua}"/>

                                <h:outputLabel for="numero" value="Nº:"/>
                                <p:inputText style="width: 30px" id="numero" value="#{funcionarioMB.funcionario.numero}"/>
                            </h:panelGrid>
                            <h:commandButton id="submitButton" value="Cadastrar" actionListener="#{funcionarioMB.cadastrarFuncionario()}"/>

                        </p:dialog>
                    </h:form>
                </div><br/>

                <h:form>
                    <p:dataTable  emptyMessage="Nenhum dado encontrado" value="#{funcionarioMB.listar()}" var="funcionario" id="tabela">

                        <p:column headerText="Nome">
                            <h:outputText value="#{funcionario.nome}"/>
                        </p:column> 

                        <p:column headerText="CPF">
                            <h:outputText value="#{funcionario.cpf}"/>
                        </p:column>

                        <p:column >
                            <p:commandButton icon="ui-icon-search" title="Ver" update=":formV:dlgF" oncomplete="dlgVisualizar.show();">
                                <f:setPropertyActionListener target="#{funcionarioMB.funcionarioSelecionado}" value="#{funcionario}"/>
                            </p:commandButton>
                            <p:commandButton icon="ui-icon-pencil" title="Editar" update=":formEditarFuncionario:dlgEditarF" oncomplete="dlgEditarFuncionario.show();">
                                <f:setPropertyActionListener target="#{funcionarioMB.funcionarioSelecionado}" value="#{funcionario}"/>
                            </p:commandButton>

                            <p:commandButton  icon="ui-icon-trash" title="Apagar" ajax="false" update="tabela" actionListener="#{funcionarioMB.deletarFuncionario(funcionario)}"/>
                        </p:column>
                    </p:dataTable>
                </h:form>

                <h:form id="formV">
                    <p:dialog widgetVar="dlgVisualizar" header="Funcionário" resizable="false" closable="true" id="dlgF" style="text-align:left">
                        <p:panelGrid columns="2" style="margin-bottom:10px" id="idD">
                            <h:outputText value="Nome: "/>
                            <h:outputText value="#{funcionarioMB.funcionarioSelecionado.nome}"/>

                            <h:outputText value="CPF: "/>
                            <h:outputText value="#{funcionarioMB.funcionarioSelecionado.cpf}"/>

                            <h:outputText value="RG: "/>
                            <h:outputText value="#{funcionarioMB.funcionarioSelecionado.rg}"/>

                            <h:outputText value="Data de Nascimento: "/>
                            <h:outputText value="#{funcionarioMB.funcionarioSelecionado.dataNascimento}"/>

                            <h:outputText value="Situação Civil: "/>
                            <h:outputText value="#{funcionarioMB.funcionarioSelecionado.situacaoCivil}"/>

                            <h:outputText value="CTPS: "/>
                            <h:outputText value="#{funcionarioMB.funcionarioSelecionado.ctps}"/>

                            <h:outputText value="Cidade: "/>
                            <h:outputText value="#{funcionarioMB.funcionarioSelecionado.cidade}"/>

                            <h:outputText value="Bairro: "/>
                            <h:outputText value="#{funcionarioMB.funcionarioSelecionado.bairro}"/>

                            <h:outputText value="Rua: "/>
                            <h:outputText value="#{funcionarioMB.funcionarioSelecionado.rua}"/>

                            <h:outputText value="Número: " />
                            <h:outputText value="#{funcionarioMB.funcionarioSelecionado.numero}"/>
                        </p:panelGrid>
                    </p:dialog>
                </h:form>

                <!-- Dialgo editar funcionario -->
                <h:form id="formEditarFuncionario">
                    <p:dialog widgetVar="dlgEditarFuncionario" header="Funcionário" resizable="false" closable="true" id="dlgEditarF" style="text-align:left">
                        <p:panelGrid columns="2" style="margin-bottom:10px">
                            <h:outputText value="Nome: "/>
                            <p:inputText value="#{funcionarioMB.funcionarioSelecionado.nome}"/>

                            <h:outputText value="CPF: "/>
                            <p:inputText value="#{funcionarioMB.funcionarioSelecionado.cpf}"/>

                            <h:outputText value="RG: "/>
                            <p:inputText value="#{funcionarioMB.funcionarioSelecionado.rg}"/>

                            <h:outputText value="Data de Nascimento: "/>
                            <p:inputText value="#{funcionarioMB.funcionarioSelecionado.dataNascimento}" >
                                <f:convertDateTime pattern="dd/MM/yyy"></f:convertDateTime>
                            </p:inputText>

                            <h:outputText value="Situação Civil: "/>
                            <p:inputText value="#{funcionarioMB.funcionarioSelecionado.situacaoCivil}"/>

                            <h:outputText value="CTPS: "/>
                            <p:inputText value="#{funcionarioMB.funcionarioSelecionado.ctps}"/>

                            <h:outputText value="Cidade: "/>
                            <p:inputText value="#{funcionarioMB.funcionarioSelecionado.cidade}"/>

                            <h:outputText value="Bairro: "/>
                            <p:inputText value="#{funcionarioMB.funcionarioSelecionado.bairro}"/>

                            <h:outputText value="Rua: "/>
                            <p:inputText value="#{funcionarioMB.funcionarioSelecionado.rua}"/>

                            <h:outputText value="Número: " />
                            <p:inputText value="#{funcionarioMB.funcionarioSelecionado.numero}"/>
                        </p:panelGrid>
                        <h:commandButton value="Salvar" actionListener="#{funcionarioMB.alterarFuncionario()}" />
                        <h:commandButton value="Cancelar" onclick="dlgEditarFuncionario.hide();"/>
                    </p:dialog>
                </h:form>
            </p:panel>
        </ui:define>
    </ui:composition>
</html>
